<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Beeru Bike Point - Premium Billing</title>
<style>
  body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; background: #f0f4f8; }
  header { background: #4a90e2; padding: 20px; color: #fff; text-align: center; border-bottom: 4px solid #357ab8; }
  h1 { margin: 0; font-family: 'Comic Sans MS', cursive; }
  main { padding: 20px; max-width: 1200px; margin:auto; background: #fff; border-radius:12px; box-shadow: 0 8px 20px rgba(0,0,0,0.1);}
  h2 { margin-top:0; color:#2c3e50; }

  table { width: 100%; border-collapse: collapse; margin-top: 10px; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  th { background: #4a90e2; color: #fff; border-radius:6px; }
  input[type="text"], input[type="number"] { width: 100%; padding: 5px; border-radius: 6px; border: 1px solid #aaa; }
  button { padding: 8px 14px; border: none; background: #4a90e2; color: white; cursor: pointer; border-radius: 6px; margin:2px;}
  button:hover { background: #357ab8; }
  .danger { background: #e74c3c; }
  .danger:hover { background: #c0392b; }
  .success { background: #2ecc71; }
  .success:hover { background: #27ae60; }

  footer { text-align: center; padding: 12px; margin-top:20px; font-size:14px; color:#555; }

  /* Modal */
  .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); justify-content:center; align-items:center; }
  .modal.open { display: flex; }
  .modal-content { background: #fff; padding: 20px; border-radius: 12px; max-width: 800px; width: 90%; max-height: 90%; overflow:auto; box-shadow:0 10px 30px rgba(0,0,0,0.2);}
  .modal-content h3 { margin-top:0; text-align:center; }
  .close-btn { float:right; cursor:pointer; font-size:22px; background:none; border:none; color:#e74c3c; }

  /* Logo */
  .logo { width:60px; height:60px; object-fit: contain; display:block; margin:auto; margin-bottom:10px; }

  .customer-info { display:flex; justify-content:space-between; margin-top:10px; margin-bottom:10px; }
  .customer-info div { text-align:left; }
</style>
</head>
<body>

<header>
  <h1>Beeru Bike Point</h1>
  <p>Fast, Reliable & Affordable Bike Servicing</p>
</header>

<main>
  <h2>Customer Details</h2>
  <label>Name: <input type="text" id="custName" placeholder="e.g. Suraj"></label>
  <label>Phone: <input type="text" id="custPhone" placeholder="e.g. 98xxxxxx22"></label>
  <label>Vehicle No: <input type="text" id="vehicleNo" placeholder="e.g. MH-02-AB-1234"></label>

  <h2>Create Bill</h2>
  <table id="itemsTable">
    <thead>
      <tr>
        <th>Sr No</th>
        <th>Particulars</th>
        <th>Qty</th>
        <th>Rate (₹)</th>
        <th>Amount (₹)</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <br>
  <button onclick="addItem()">Add Item</button>
  <button class="success" onclick="generateBill()">Generate Bill</button>

  <div id="historySection">
    <h2>Bill History</h2>
    <table id="historyTable">
      <thead>
        <tr>
          <th>Bill No</th>
          <th>Date</th>
          <th>Total (₹)</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</main>

<!-- Modal -->
<div class="modal" id="invoiceModal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal()">×</button>
    <div id="invoiceBody"></div>
  </div>
</div>

<footer>
  &copy; 2025 Beeru Bike Point. All rights reserved.
</footer>

<script>
  let items = [];
  let billHistory = [];
  let billCounter = 1;

  function addItem() {
    let tbody = document.querySelector("#itemsTable tbody");
    let index = items.length;
    items.push({particular:'', qty:1, rate:0});

    let row = tbody.insertRow();
    row.innerHTML = `
      <td>${index+1}</td>
      <td><input type="text" oninput="items[${index}].particular=this.value"></td>
      <td><input type="number" value="1" min="1" oninput="items[${index}].qty=parseInt(this.value)||0;updateAmount(this,${index})"></td>
      <td><input type="number" value="0" min="0" oninput="items[${index}].rate=parseFloat(this.value)||0;updateAmount(this,${index})"></td>
      <td class="amt">0.00</td>
      <td><button class="danger" onclick="removeItemRow(this,${index})">Delete</button></td>
    `;
    row.querySelector('input[type="text"]').focus();
  }

  function updateAmount(input,index){
    let row = input.closest("tr");
    let qty = parseFloat(row.querySelectorAll("input")[1].value)||0;
    let rate = parseFloat(row.querySelectorAll("input")[2].value)||0;
    row.querySelector(".amt").textContent = (qty*rate).toFixed(2);
  }

  function removeItemRow(btn,index){
    btn.closest("tr").remove();
    items.splice(index,1);
    document.querySelectorAll("#itemsTable tbody tr").forEach((row,i)=>row.cells[0].textContent=i+1);
  }

  function generateBill(){
    const custName = document.getElementById('custName').value.trim();
    const custPhone = document.getElementById('custPhone').value.trim();
    const vehicleNo = document.getElementById('vehicleNo').value.trim();
    if(!custName || !vehicleNo) { alert("Enter customer name and vehicle no"); return; }

    if(items.length===0) { alert("Add at least one item"); return; }
    let total = items.reduce((sum,it)=>sum+(it.qty*it.rate),0);
    let bill = { 
      id: billCounter++, 
      date: new Date().toLocaleString(), 
      total: total.toFixed(2), 
      items:[...items],
      customer: { name: custName, phone: custPhone, vehicle: vehicleNo }
    };
    billHistory.push(bill);
    renderHistory();
    showInvoiceModal(bill);
    items=[];
    document.querySelector("#itemsTable tbody").innerHTML="";
    document.getElementById('custName').value='';
    document.getElementById('custPhone').value='';
    document.getElementById('vehicleNo').value='';
  }

  function renderHistory(){
    let tbody=document.querySelector("#historyTable tbody");
    tbody.innerHTML="";
    billHistory.forEach(bill=>{
      let row=tbody.insertRow();
      row.innerHTML=`
        <td>${bill.id}</td>
        <td>${bill.date}</td>
        <td>₹${bill.total}</td>
        <td>
          <button onclick="showInvoiceModal(${bill.id})">View</button>
          <button class="danger" onclick="deleteBill(${bill.id})">Delete</button>
        </td>
      `;
    });
  }

  function showInvoiceModal(billOrId){
    let bill = typeof billOrId==='object'? billOrId : billHistory.find(b=>b.id===billOrId);
    if(!bill) return;
    let html = `
      
      <h3>Invoice - Beeru Bike Point</h3>
      <div class="customer-info">
        <div><strong>Customer:</strong> ${bill.customer.name}<br><strong>Phone:</strong> ${bill.customer.phone||'-'}</div>
        <div><strong>Vehicle:</strong> ${bill.customer.vehicle}<br><strong>Bill No:</strong> ${bill.id}</div>
        <div><strong>Date:</strong> ${bill.date}</div>
      </div>
      <table>
        <thead>
          <tr>
            <th>Sr</th><th>Particulars</th><th>Qty</th><th>Rate (₹)</th><th>Amount (₹)</th>
          </tr>
        </thead>
        <tbody>
          ${bill.items.map((it,i)=>`<tr>
            <td>${i+1}</td>
            <td>${it.particular}</td>
            <td>${it.qty}</td>
            <td>${it.rate.toFixed(2)}</td>
            <td>${(it.qty*it.rate).toFixed(2)}</td>
          </tr>`).join('')}
        </tbody>
        <tfoot>
          <tr>
            <td colspan="4" style="text-align:right;font-weight:bold">Total</td>
            <td>${bill.total}</td>
          </tr>
        </tfoot>
      </table>
      <p style="margin-top:10px; font-size:12px; color:#555;">* Computer generated invoice. Please keep this for records.</p>`;
    document.getElementById('invoiceBody').innerHTML=html;
    document.getElementById('invoiceModal').classList.add('open');
  }

  function closeModal(){ document.getElementById('invoiceModal').classList.remove('open'); }
  function deleteBill(id){ billHistory=billHistory.filter(b=>b.id!==id); renderHistory(); }
</script>

</body>
</html>
